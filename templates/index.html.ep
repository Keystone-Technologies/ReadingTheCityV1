<!DOCTYPE html>
<html>
    <head>
        <title>Reading the City</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="css/normalize.css" type="text/css" media="screen"/>
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
        <link rel="stylesheet" href="css/slider.css">
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
        <script src="js/checkbox.js"></script>
        <style>
             .hide { color:gray }
        </style>
        <script>
            $(function(){
                $(".checkbox").each(function(){
                    $(this).change(function(){
                        console.log("Check val: "+$(this).is(':checked'));
                        $(this).parent().parent().toggleClass("hide");
                    });
                });
                $(".Slider > .FloatLeft > span").each(function(){
                    var beacon = $(this).attr('id');
                    console.log("Setting up slider " + beacon);
                    var value = parseInt( $( this ).text(), 10 );
                    $(this).empty().slider({
                        value: value,
                        range: "min",
                        animate: true,
                        orientation: "vertical",
                        stop: function (e, ui) {
                            if ( $(this).parent().parent().find("input[type=checkbox]").first().is(':checked') == false ) {
                                $.post("/app", {signal: ui.value, beacon: beacon}, function(data){
                                    console.log(data);
                                    $("#console").append("<p>> <a href='" + data.url.default + "'>" + data.name + " - " + data.proximity + "</a></p>");
                                });
                            }
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <div id="Wrapper">
            <div id="Header">
                <div id="Account">
                    <h2><span></span></h2>
                </div>
            </div><!-- End Header -->
            <!--<div id="Output">
                <div id="logo">
                    <img src="img/logo.png" class="resize" alt="Logo Goes Here."/>
                </div>
                <div id="ConsoleWrapper">
                    <h1>Console Output:</h1>
                    <div id="console"><p>&#62;&nsbp;Major:<span class="console.major"></span>&nsbp;Minor:<span class="console.minor"></span>&nsbp;&#45;&nsbp;Signal Strength:<span class="console.signal"></span>
                    </div>
                </div>
                <div id="clear"></div>
            </div><!-- End Output -->-->
            <div id="Input">
                <div class="Slider"><!-- Start Slider 1 -->
                     <div class="FloatLeft">
                        <span id="b9407f30-f5f8-466e-aff9-25556b57fe6d-30024-36068">65</span>
                     </div>
                     <div class="FloatRight">
                         <p><span class="name"></span></p>
                         <p>Major ID:&nsbp;<span class="major"></span><br/>Minor ID:&nsbp;<span class="minor"></span></p>
                         <p>Signal Strength:&nsbp;<span class="signal"></span>&nsbp;db</p>
                         <p>Link:&nsbp;<span class="url"></span></p>
                         <p>Status:&nsbp;<span class="status"></span><br/>Proximity:&nsbp;<span class="proximity"></span><br/>Hidden:&nsbp;<span class="hidden"></span></p>
                         <div class="checkbox"><input type="checkbox" value="0"></div>
                     </div>
                </div><!-- End Slider 1 -->
                <div class="Slider"><!-- Start Slider 2 -->
                     <div class="FloatLeft">
                        <span id="B9407F30-F5F8-466E-AFF9-25556B57FE6D-1222-4245">90</span>
                     </div>
                     <div class="FloatRight">
                         <p><span class="name"></span></p>
                         <p>Major ID:&nsbp;<span class="major"></span><br/>Minor ID:&nsbp;<span class="minor"></span></p>
                         <p>Signal Strength:&nsbp;<span class="signal"></span>&nsbp;db</p>
                         <p>Link:&nsbp;<span class="url"></span></p>
                         <p>Status:&nsbp;<span class="status"></span><br/>Proximity:&nsbp;<span class="proximity"></span><br/>Hidden:&nsbp;<span class="hidden"></span></p>
                         <div class="checkbox"><input type="checkbox" value="0"></div>
                     </div>
                </div><!-- End Slider 2 -->
                <div class="Slider"><!-- Start Slider 3 -->
                     <div class="FloatLeft">
                         <span id="B9407F30-F5F8-466E-AFF9-25556B57FE6D-1352-0003">0</span>
                     </div>
                     <div class="FloatRight">
                         <p><span class="name"></span></p>
                         <p>Major ID:&nsbp;<span class="major"></span><br/>Minor ID:&nsbp;<span class="minor"></span></p>
                         <p>Signal Strength:&nsbp;<span class="signal"></span>&nsbp;db</p>
                         <p>Link:&nsbp;<span class="url"></span></p>
                         <p>Status:&nsbp;<span class="status"></span><br/>Proximity:&nsbp;<span class="proximity"></span><br/>Hidden:&nsbp;<span class="hidden"></span></p>
                         <div class="checkbox"><input type="checkbox" value="0"></div>
                     </div>
                </div><!-- End Slider 3 -->
                <div class="Slider"><!-- Start Slider 4 -->
                     <div class="FloatLeft">
                         <span id="B9407F30-F5F8-466E-AFF9-25556B57FE6D-2452-0012">22</span>
                     </div>
                     <div class="FloatRight">
                         <p><span class="name"></span></p>
                         <p>Major ID:&nsbp;<span class="major"></span><br/>Minor ID:&nsbp;<span class="minor"></span></p>
                         <p>Signal Strength:&nsbp;<span class="signal"></span>&nsbp;db</p>
                         <p>Link:&nsbp;<span class="url"></span></p>
                         <p>Status:&nsbp;<span class="status"></span><br/>Proximity:&nsbp;<span class="proximity"></span><br/>Hidden:&nsbp;<span class="hidden"></span></p>
                         <div class="checkbox"><input type="checkbox" value="0"></div>
                     </div>
                </div><!-- End Slider 4 -->
            </div><!-- End Input -->
        </div><!-- End Wrapper -->
    </body>
</html>
